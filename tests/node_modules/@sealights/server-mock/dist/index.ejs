<!DOCTYPE html>
<html>
	<head>
		<title>Mock Server For Agents: API Configuration</title>
		<link rel="stylesheet" href="styles/main.css">
		<script src="scripts/bundle.js"></script>
	</head>
	<body>
		<div class="header">
			<div class="logo"></div>
			<div class="title">Mock Server For Agents: API Configuration</div>
		</div>
		<div class="settings">
			<% if (model) { %>
				<div class="toolbar">
					<button class="load-settings" title="Load configuration from file">Load Configuration</button>
					<button class="save-settings" title="Save configuration to file">Save Configuration</button>
					<button class="reset-settings" title="Reset configuration of all routes">Reset Configuration</button>
					<button class="toggle-web-token" title="Show/hide web token">Show Web Token</button>
					<button class="toggle-test-data-links" title="Get test data from state">Test Data Links</button>
				</div>
				<div class="toolbar-secondary-panel test-data-links not-displayed">
					<a href="/api/test/buildsessions" target="_blank"><button>Build Sessions</button></a>
					<a href="/api/test/buildmapping" target="_blank"><button>Build Maps</button></a>
					<a href="/api/test/footprints" target="_blank"><button>Footprints</button></a>
					<a href="/api/test/agents/events" target="_blank"><button>Events</button></a>
					<a href="/api/test/productiondata" target="_blank"><button>Production Data</button></a>
					<a href="/api/test/blobs" target="_blank"><button>Blobs</button></a>
					<a href="/api/test/logs" target="_blank"><button>Logs</button></a>
				</div>
				<textarea class="toolbar-secondary-panel web-token not-displayed"></textarea>
				<div class="list-wrapper">
					<table class="api-list">
						<thead>
							<tr>
								<th>Method</th>
								<th>URL</th>
								<th></th>
								<th>Custom Status</th>
								<th>Repeat Custom Status<br>(0 means forever)</th>
							</tr>
						</thead>
						<tbody>
							<% model.ROUTES.forEach(route => { %>
								<tr data-method="<%= route.method %>" data-url="<%= route.url %>" data-settings="<%= JSON.stringify(route.settings) %>">
									<td class="method"><%= route.method %></td>
									<td class="route" title="<%= route.description %>">
										<%= route.url %>
										<% if (route.description) { %>
											<span class="help">?</span>
										<% } %>
									</td>
									<td><button class="button reset">Reset</button></td>
									<td>
										<% model.POPULAR_STATUS_CODES.forEach(item => { %>
											<button class="button status" data-value="<%= item %>"><%= item %></button>
										<% }) %>
									</td>
									<td>
										<div class="cell-content">
											<input type="range" class="repeat-status" min="0" max="100" step="1" value="0">
											<span class="repeat-status-label"></span>
										</div>
									</td>
								</tr>
							<% }) %>
						</tbody>
					</table>
				</div>
			<% } %>
		</div>
	</body>
</html>